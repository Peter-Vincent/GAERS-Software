Bootstrap: docker
From: ubuntu:14.04

%labels
 Maintainer Peter Vincent peter.vincent@yale.edu
 Software Neurosuite
 Homepage http://neurosuite.sourceforge.net/

%post
 apt-get update
 apt-get -y install wget build-essential
 # apt-get -y install gdebi
 packages="libklustersshared_2.0.0 klusters_2.0.0 neuroscope_2.0.0 ndmanager_2.0.0"
 psuffix="-trusty_amd64.deb"
 for package in $packages;
 do
    wget http://sourceforge.net/projects/neurosuite/files/ubuntu/${package}${psuffix}/download -O /tmp/${package}${psuffix}
    dpkg -i /tmp/${package}${psuffix}
    apt-get -yf install
    rm /tmp/${package}${psuffix}
 done

 # because naming schemes were meant to be broken!
 wget http://sourceforge.net/projects/neurosuite/files/ubuntu/ndmanager-plugins_1.4.14-trusty_amd64.deb/download -O /tmp/ndmanager-plugins_1.4.14-trusty_amd64.deb
 dpkg -i /tmp/ndmanager-plugins_1.4.14-trusty_amd64.deb
 apt-get -yf install
 rm /tmp/ndmanager-plugins_1.4.14-trusty_amd64.deb

 wget http://sourceforge.net/projects/neurosuite/files/ubuntu/nphys-data_2.0.0-trusty_all.deb/download -O /tmp/nphys-data_2.0.0-trusty_all.deb
 dpkg -i /tmp/nphys-data_2.0.0-trusty_all.deb
 apt-get -yf install
 rm /tmp/nphys-data_2.0.0-bionic_all.deb

 wget https://sourceforge.net/projects/klustakwik/files/klustakwik/KlustaKwik-2.0.1.tar.bz2/download -O /tmp/KlustaKwik-2.0.1.tar.bz2
 tar xf /tmp/KlustaKwik-2.0.1.tar.bz2 && cd KlustaKwik-2.0.1
 make
 cp KlustaKwik /usr/local/bin/KlustaKwik
 cd .. && rm -rf KlustaKwik-2.0.1
